(function(e){function t(t){for(var r,s,o=t[0],c=t[1],u=t[2],m=0,d=[];m<o.length;m++)s=o[m],a[s]&&d.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"08bd":function(e,t,n){},"3ea9":function(e,t,n){"use strict";var r=n("08bd"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("7f7f"),n("cadf"),n("551c"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],s=(n("034f"),n("2877")),o={},c=Object(s["a"])(o,a,i,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"submit-info"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"submit-content"},[e._m(0),n("div",{staticClass:"conten-middle"},[n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Email：")]),n("div",{staticClass:"content-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"value-info",domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.emailErro.name)+"\n                    ")])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Unique Reference Number (URN)：")]),n("div",{staticClass:"content-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.referNum,expression:"referNum"}],staticClass:"value-info",domProps:{value:e.referNum},on:{input:function(t){t.target.composing||(e.referNum=t.target.value)}}})])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.propErro.name)+"\n                    ")])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Calendar (select a daterange)：")]),n("div",{staticClass:"content-value"},[n("el-date-picker",{staticClass:"value-info-time",staticStyle:{width:"280px",height:"40px"},attrs:{type:"daterange",placeholder:"select a daterange","value-format":"yyyy-MM-dd","start-placeholder":"startDate","end-placeholder":"endDate"},on:{change:e.changeTime},model:{value:e.chooseTime,callback:function(t){e.chooseTime=t},expression:"chooseTime"}})],1)]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.timeErro.name)+"\n                    ")])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Weekly Turnover (£)：")]),n("div",{staticClass:"content-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.weekNum,expression:"weekNum"}],staticClass:"value-info",domProps:{value:e.weekNum},on:{input:[function(t){t.target.composing||(e.weekNum=t.target.value)},e.changeNum]}})])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.weekErro.name)+"\n                    ")])])]),n("div",{staticClass:"content-bottom"},[n("div",{staticClass:"action-info"},[n("div",{staticClass:"cancel",on:{click:e.resetInfo}},[e._v("Clear")]),n("div",{staticClass:"sure",on:{click:e.makeSure}},[e._v("Submit")])])])])]),e.showSure?n("div",{staticClass:"dialog-window"},[n("div",{staticClass:"submit-content"},[e._m(1),e._m(2),n("div",{staticClass:"content-bottom-two"},[n("div",{staticClass:"action-info-two"},[n("div",{staticClass:"cancel",staticStyle:{"margin-right":"40px"},on:{click:e.closeSure}},[e._v("No")]),n("div",{staticClass:"sure",on:{click:e.submit}},[e._v("Yes")])])])])]):e._e(),e.showOkay?n("div",{staticClass:"dialog-window"},[n("div",{staticClass:"submit-content"},[e._m(3),e._m(4),n("div",{staticClass:"sure-agein",on:{click:e.goHome}},[e._v("Ok")])])]):e._e()])},d=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"conten-top"},[r("img",{staticClass:"logo-img",attrs:{src:n("bb74")}}),r("div",{staticClass:"logo-notice"},[e._v("Property Revenue Management System")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"conten-top"},[r("img",{staticClass:"logo-img",attrs:{src:n("bb74")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conten-middle"},[n("div",{staticClass:"sure-notice"},[e._v("You are about to submit")]),n("div",{staticClass:"sure-notice"},[e._v("your weekly revenue update.")]),n("div",{staticClass:"sure-notice",staticStyle:{"font-weight":"bold"}},[e._v("Would you like to proceed?")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"conten-top"},[r("img",{staticClass:"logo-img",attrs:{src:n("bb74")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conten-middle"},[n("div",{staticClass:"sure-notice"},[e._v("Thank you for submitting")]),n("div",{staticClass:"sure-notice"},[e._v("your weekly update.")]),n("div",{staticClass:"sure-notice",staticStyle:{"font-weight":"bold"}},[e._v("You will receive a")]),n("div",{staticClass:"sure-notice",staticStyle:{"font-weight":"bold"}},[e._v("confirmation email shortly.")])])}],v=(n("a481"),n("bc3a")),h=n.n(v),f=n("2f62"),p={openId:function(e){return e.user.openId},userInfo:function(e){return e.user.userInfo},loginStatus:function(e){return e.user.loginStatus}},g=p,_={},w={},k={},C={namespaced:!0,state:_,mutations:w,actions:k},E=(n("96cf"),n("1da1")),b=n("a78e"),y=n.n(b),S=n("335a"),N="Login-Status",T="User-Info",O="User-OpenId";function x(){return y.a.get(N)||0}function I(e){return y.a.set(N,e,{expires:7}),e}function P(){return y.a.remove(N),""}function M(){return S["a"].get(T,{})}function R(e){return S["a"].set(T,e),e}function U(){return S["a"].remove(T),{}}function D(){return S["a"].get(O,{})}function j(e){return S["a"].set(O,e),e}function $(){return S["a"].remove(O),{}}function F(){for(var e=["130","131","132","133","135","137","138","170","173","181","186","187","189"],t=parseInt(10*Math.random()),n=e[t],r=0;r<8;r++)n+=Math.floor(10*Math.random());return n}var L={loginStatus:x(),openId:D(),userInfo:M()},A={SET_USERINFO:function(e,t){e.userInfo=t},SET_OPENID:function(e,t){e.openId=t},SET_LOGIN_STATUS:function(e,t){e.loginStatus=t}},W={loginWechatAuth:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a={code:n},e.next=4,(void 0)(a);case 4:if(i=e.sent,0!==i.code){e.next=18;break}return r("SET_OPENID",j(i.data.openId)),e.next=9,(void 0)();case 9:if(s=e.sent,400001!==s.code){e.next=17;break}return e.next=13,(void 0)({telephone:F()});case 13:o=e.sent,0!==o.code?r("SET_LOGIN_STATUS",1):r("SET_USERINFO",R(o.data)),e.next=18;break;case 17:r("SET_USERINFO",R(s.data));case 18:return e.abrupt("return",new Promise(function(e,t){e(i)}));case 19:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),setLoginStatus:function(e,t){var n=e.commit;0!==t&&1!==t||($(),U(),n("SET_OPENID",null),n("SET_USERINFO",null)),n("SET_LOGIN_STATUS",I(t))},fedLogOut:function(){$(),U(),P()},getUserByOpenId:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,(void 0)(n);case 3:a=e.sent,0===a.code&&r("SET_USERINFO",R(a.data));case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},Y={namespaced:!0,state:L,mutations:A,actions:W};r["default"].use(f["a"]);var B=new f["a"].Store({modules:{app:C,user:Y},getters:g}),G=B,H=h.a.create({baseURL:"/api",timeout:6e3}),q=function(e){return e.response&&e.response.status,Promise.reject(e.response)};H.interceptors.request.use(function(e){var t=G.getters.openId;return t&&(e.headers["openId"]=t),e},q),H.interceptors.response.use(function(e){return e.data},q);function J(e){return H({url:"/user/check",method:"post",data:e})}function z(e){return H({url:"/user/upload",method:"post",data:e})}var K=n("5c96"),Q=n.n(K),V={name:"Home",data:function(){return{showSure:!1,showOkay:!1,email:"",referNum:"",weekNum:"",chooseTime:"",pickerOption:{firstDayOfWeek:1},startTime:"",endTime:"",emailErro:{show:!1,name:""},propErro:{show:!1,name:""},timeErro:{show:!1,name:""},weekErro:{show:!1,name:""},loading:!1}},created:function(){},methods:{checkNum:function(e){var t=/^(([1-9][0-9]*\.[0-9][0-9]*)|([0]\.[0-9][0-9]*)|([1-9][0-9]*)|([0]{1}))$/;return t.test(e)},changeNum:function(e){var t=e.currentTarget.value.replace(/,/g,""),n=-1!==t.indexOf("£");if(t=t.replace(/£/g,""),!this.checkNum(t))return console.log("gooood",t),void(this.weekErro.name="Please input correct weekly turnover");this.weekErro.name="",t&&t.length&&(this.weekNum=parseFloat(t).toLocaleString("en-US")),n&&(this.weekNum=this.weekNum+"£")},changeTime:function(e){this.startTime=e[0]+"T00:00:00+08:00",this.endTime=e[1]+"T23:59:59+08:00",this.chooseTime=e},getNextDate:function(e,t){var n=new Date(e);n.setDate(n.getDate()+t);var r=n.getFullYear(),a=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,i=n.getDate()<10?"0"+n.getDate():n.getDate();return r+"-"+a+"-"+i},resetInfo:function(){this.email="",this.chooseTime="",this.referNum="",this.weekNum="",this.emailErro.name="",this.propErro.name="",this.timeErro.name="",this.weekErro.name=""},makeSure:function(){if(0==this.email.length?(this.emailErro.name="Please input your eamil",this.emailErro.show=!0):(this.emailErro.name="",this.emailErro.show=!1),0==this.referNum.length?(this.propErro.name="Please input  reference number",this.propErro.show=!0):(this.propErro.name="",this.propErro.show=!1),0==this.chooseTime.length?(this.timeErro.name="Please select a dateRange",this.timeErro.show=!0):(this.timeErro.name="",this.timeErro.show=!1),0==this.weekNum.length?(this.weekErro.name="Please input weekly turnover",this.weekErro.show=!0):(this.weekErro.name="",this.weekErro.show=!1),0!=this.email.length&&0!=this.referNum.length&&0!=this.chooseTime.length&&0!=this.weekNum.length){var e=this.weekNum.replace(/,/g,"");if(e=e.replace(/£/g,""),this.checkNum(e)){var t=this,n={email:this.email,shop_union_id:this.referNum,turnover:parseFloat(e),start_date:this.startTime,end_date:this.endTime};this.loading=!0,J(n).then(function(e){0==e.error_item.length&&(t.showSure=!0),"week_time"!==e.error_item&&"start_date"!==e.error_item&&"end_date"!==e.error_item||(t.timeErro.name="Please select correct dateRange"),"email"===e.error_item&&(t.emailErro.name="Please check your email address"),"shop_union_id"===e.error_item&&(t.propErro.name="Please check your URN"),"turnover"===e.error_item&&(t.weekErro.name="Please input correct weekly turnover"),t.loading=!1},function(e){t.loading=!1})}else this.weekErro.name="Please input correct weekly turnover"}},submit:function(){var e=this,t=this.weekNum.replace(/,/g,"");if(t=t.replace(/£/g,""),this.checkNum(t)){var n={email:this.email,shop_union_id:this.referNum,turnover:parseFloat(t),start_date:this.startTime,end_date:this.endTime};this.loading=!0,z(n).then(function(t){e.showSure=!1,e.showOkay=!0,e.loading=!1},function(t){t.data.err_desc&&e.$message.error(t.data.err_desc),e.loading=!1})}else this.weekErro.name="Please input correct weekly turnover"},goHome:function(){this.resetInfo(),this.showOkay=!1},closeSure:function(){this.showSure=!1}}},X=V,Z=(n("3ea9"),Object(s["a"])(X,m,d,!1,null,"fdca3950",null));Z.options.__file="Index.vue";var ee=Z.exports;r["default"].use(l["a"]);var te=new l["a"]({mode:"history",routes:[{path:"/",name:"index",component:ee}]}),ne=(n("0fae"),n("b2d6")),re=n.n(ne);K["Message"].install=function(e,t){e.prototype.$message=K["Message"]},r["default"].use(Q.a,{locale:re.a}),r["default"].component(K["Button"].name,K["Button"]),r["default"].use(K["Message"]),r["default"].use(K["DatePicker"]),r["default"].config.productionTip=!1,new r["default"]({router:te,store:G,render:function(e){return e(u)}}).$mount("#app")},"64a9":function(e,t,n){},bb74:function(e,t,n){e.exports=n.p+"img/brand-logo.4dd9784b.png"}});
//# sourceMappingURL=app.d7e4921b.js.map