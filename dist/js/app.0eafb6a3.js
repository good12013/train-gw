(function(e){function t(t){for(var i,r,o=t[0],c=t[1],u=t[2],d=0,m=[];d<o.length;d++)r=o[d],s[r]&&m.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},s={app:0},a=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("64a9"),s=n.n(i);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("7f7f"),n("cadf"),n("551c"),n("097d");var i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],r=(n("034f"),n("2877")),o={},c=Object(r["a"])(o,s,a,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"submit-info"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"submit-content"},[e._m(0),n("div",{staticClass:"conten-middle"},[n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Email：")]),n("div",{staticClass:"content-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"value-info",domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.emailErro.name)+"\n                    ")])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Unique Reference Number (URN)：")]),n("div",{staticClass:"content-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.referNum,expression:"referNum"}],staticClass:"value-info",domProps:{value:e.referNum},on:{input:function(t){t.target.composing||(e.referNum=t.target.value)}}})])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.propErro.name)+"\n                    ")])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Are you currently tradin：")]),n("div",{staticClass:"content-value",staticStyle:{display:"flex","align-items":"center"}},[n("div",{class:1==e.choosedOpenButtun?"content-value-name-active":"content-value-name",on:{click:function(t){e.chooseOpenStatus(1)}}},[e._v("Yes")]),n("div",{class:0==e.choosedOpenButtun?"content-value-name-active":"content-value-name",on:{click:function(t){e.chooseOpenStatus(0)}}},[e._v("No")])])]),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.tradinErro.name)+"\n                    ")])]),0==e.choosedOpenButtun?n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("When do you plan to start trading？\n                        (select a date)：")]),n("div",{staticClass:"content-value"},[n("el-date-picker",{staticClass:"value-info-time",staticStyle:{width:"280px",height:"40px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"select a date"},on:{change:e.changeOpenTime},model:{value:e.openTime,callback:function(t){e.openTime=t},expression:"openTime"}})],1)]):e._e(),n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.openTimeErro.name)+"\n                    ")])]),1==e.choosedOpenButtun?n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Calendar (select a daterange)：")]),n("div",{staticClass:"content-value"},[n("el-date-picker",{staticClass:"value-info-time",staticStyle:{width:"280px",height:"40px"},attrs:{type:"daterange",placeholder:"select a daterange","value-format":"yyyy-MM-dd","start-placeholder":"startDate","end-placeholder":"endDate"},on:{change:e.changeTime},model:{value:e.chooseTime,callback:function(t){e.chooseTime=t},expression:"chooseTime"}})],1)]):e._e(),1==e.choosedOpenButtun?n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.timeErro.name)+"\n                    ")])]):e._e(),1==e.choosedOpenButtun?n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice"},[e._v("Weekly Turnover (£)：")]),n("div",{staticClass:"content-value"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.weekNum,expression:"weekNum"}],staticClass:"value-info",domProps:{value:e.weekNum},on:{input:[function(t){t.target.composing||(e.weekNum=t.target.value)},e.changeNum]}})])]):e._e(),1==e.choosedOpenButtun?n("div",{staticClass:"middle-item"},[n("div",{staticClass:"content-notice-small"}),n("div",{staticClass:"erro-value"},[e._v("\n                        "+e._s(e.weekErro.name)+"\n                    ")])]):e._e()]),n("div",{staticClass:"content-bottom"},[n("div",{staticClass:"action-info"},[n("div",{staticClass:"cancel",on:{click:e.resetInfo}},[e._v("Clear")]),n("div",{staticClass:"sure",on:{click:e.makeSure}},[e._v("Submit")])])])])]),e.showSure?n("div",{staticClass:"dialog-window"},[n("div",{staticClass:"submit-content"},[e._m(1),e._m(2),n("div",{staticClass:"content-bottom-two"},[n("div",{staticClass:"action-info-two"},[n("div",{staticClass:"cancel",staticStyle:{"margin-right":"40px"},on:{click:e.closeSure}},[e._v("No")]),n("div",{staticClass:"sure",on:{click:e.submit}},[e._v("Yes")])])])])]):e._e(),e.showOkay?n("div",{staticClass:"dialog-window"},[n("div",{staticClass:"submit-content"},[e._m(3),e._m(4),n("div",{staticClass:"sure-agein",on:{click:e.goHome}},[e._v("Ok")])])]):e._e(),e.showOpenNotice?n("div",{staticClass:"dialog-window"},[n("div",{staticClass:"submit-content"},[e._m(5),e._m(6),n("div",{staticClass:"sure-agein",on:{click:e.goHome}},[e._v("Ok")])])]):e._e()])},m=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conten-top"},[i("img",{staticClass:"logo-img",attrs:{src:n("bb74")}}),i("div",{staticClass:"logo-notice"},[e._v("Property Revenue Management System")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conten-top"},[i("img",{staticClass:"logo-img",attrs:{src:n("bb74")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conten-middle"},[n("div",{staticClass:"sure-notice"},[e._v("You are about to submit")]),n("div",{staticClass:"sure-notice"},[e._v("your weekly revenue update.")]),n("div",{staticClass:"sure-notice",staticStyle:{"font-weight":"bold"}},[e._v("Would you like to proceed?")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conten-top"},[i("img",{staticClass:"logo-img",attrs:{src:n("bb74")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conten-middle"},[n("div",{staticClass:"sure-notice"},[e._v("Thank you for submitting")]),n("div",{staticClass:"sure-notice"},[e._v("your weekly update.")]),n("div",{staticClass:"sure-notice",staticStyle:{"font-weight":"bold"}},[e._v("You will receive a")]),n("div",{staticClass:"sure-notice",staticStyle:{"font-weight":"bold"}},[e._v("confirmation email shortly.")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conten-top"},[i("img",{staticClass:"logo-img",attrs:{src:n("bb74")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conten-middle"},[n("div",{staticClass:"sure-notice"},[e._v("Thank you for providing the information")]),n("div",{staticClass:"sure-notice"},[e._v("We will send you a reminder when you")]),n("div",{staticClass:"sure-notice"},[e._v("start trading")])])}],h=(n("a481"),n("bc3a")),v=n.n(h),p=n("2f62"),f={openId:function(e){return e.user.openId},userInfo:function(e){return e.user.userInfo},loginStatus:function(e){return e.user.loginStatus}},g=f,_={},w={},C={},E={namespaced:!0,state:_,mutations:w,actions:C},k=(n("96cf"),n("1da1")),y=n("a78e"),T=n.n(y),b=n("335a"),O="Login-Status",S="User-Info",N="User-OpenId";function x(){return T.a.get(O)||0}function I(e){return T.a.set(O,e,{expires:7}),e}function P(){return T.a.remove(O),""}function M(){return b["a"].get(S,{})}function B(e){return b["a"].set(S,e),e}function R(){return b["a"].remove(S),{}}function U(){return b["a"].get(N,{})}function $(e){return b["a"].set(N,e),e}function D(){return b["a"].remove(N),{}}function j(){for(var e=["130","131","132","133","135","137","138","170","173","181","186","187","189"],t=parseInt(10*Math.random()),n=e[t],i=0;i<8;i++)n+=Math.floor(10*Math.random());return n}var F={loginStatus:x(),openId:U(),userInfo:M()},L={SET_USERINFO:function(e,t){e.userInfo=t},SET_OPENID:function(e,t){e.openId=t},SET_LOGIN_STATUS:function(e,t){e.loginStatus=t}},A={loginWechatAuth:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(t,n){var i,s,a,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,s={code:n},e.next=4,(void 0)(s);case 4:if(a=e.sent,0!==a.code){e.next=18;break}return i("SET_OPENID",$(a.data.openId)),e.next=9,(void 0)();case 9:if(r=e.sent,400001!==r.code){e.next=17;break}return e.next=13,(void 0)({telephone:j()});case 13:o=e.sent,0!==o.code?i("SET_LOGIN_STATUS",1):i("SET_USERINFO",B(o.data)),e.next=18;break;case 17:i("SET_USERINFO",B(r.data));case 18:return e.abrupt("return",new Promise(function(e,t){e(a)}));case 19:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),setLoginStatus:function(e,t){var n=e.commit;0!==t&&1!==t||(D(),R(),n("SET_OPENID",null),n("SET_USERINFO",null)),n("SET_LOGIN_STATUS",I(t))},fedLogOut:function(){D(),R(),P()},getUserByOpenId:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(t,n){var i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,(void 0)(n);case 3:s=e.sent,0===s.code&&i("SET_USERINFO",B(s.data));case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},W={namespaced:!0,state:F,mutations:L,actions:A};i["default"].use(p["a"]);var Y=new p["a"].Store({modules:{app:E,user:W},getters:g}),H=Y,G=v.a.create({baseURL:"/api",timeout:6e3}),q=function(e){return e.response&&e.response.status,Promise.reject(e.response)};G.interceptors.request.use(function(e){var t=H.getters.openId;return t&&(e.headers["openId"]=t),e},q),G.interceptors.response.use(function(e){return e.data},q);function J(e){return G({url:"/user/check",method:"post",data:e})}function z(e){return G({url:"/user/upload",method:"post",data:e})}function K(e){return G({url:"/user/trading_set",method:"post",data:e})}var Q=n("5c96"),V=n.n(Q),X={name:"Home",data:function(){return{showSure:!1,showOkay:!1,email:"",referNum:"",weekNum:"",chooseTime:"",pickerOption:{firstDayOfWeek:1},startTime:"",endTime:"",emailErro:{show:!1,name:""},propErro:{show:!1,name:""},timeErro:{show:!1,name:""},weekErro:{show:!1,name:""},openTimeErro:{show:!1,name:""},tradinErro:{show:!1,name:""},loading:!1,choosedOpenButtun:-1,openTime:"",showOpenNotice:!1}},created:function(){},methods:{changeOpenTime:function(e){this.openTime=e},chooseOpenStatus:function(e){this.choosedOpenButtun=e,this.tradinErro.name="",this.tradinErro.show=!1},checkNum:function(e){var t=/^(([1-9][0-9]*\.[0-9][0-9]*)|([0]\.[0-9][0-9]*)|([1-9][0-9]*)|([0]{1}))$/;return t.test(e)},changeNum:function(e){var t=e.currentTarget.value.replace(/,/g,""),n=-1!==t.indexOf("£");if(t=t.replace(/£/g,""),!this.checkNum(t))return console.log("gooood",t),void(this.weekErro.name="Please input correct weekly turnover");this.weekErro.name="",t&&t.length&&(this.weekNum=parseFloat(t).toLocaleString("en-US")),n&&(this.weekNum=this.weekNum+"£")},changeTime:function(e){this.startTime=e[0]+"T00:00:00+08:00",this.endTime=e[1]+"T23:59:59+08:00",this.chooseTime=e},getNextDate:function(e,t){var n=new Date(e);n.setDate(n.getDate()+t);var i=n.getFullYear(),s=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0"+n.getDate():n.getDate();return i+"-"+s+"-"+a},resetInfo:function(){this.email="",this.chooseTime="",this.referNum="",this.weekNum="",this.openTime="",this.emailErro.name="",this.propErro.name="",this.timeErro.name="",this.weekErro.name="",this.openTimeErro.name="",this.tradinErro.name="",this.choosedOpenButtun=-1},makeSure:function(){if(0==this.email.length?(this.emailErro.name="Please input your eamil",this.emailErro.show=!0):(this.emailErro.name="",this.emailErro.show=!1),0==this.referNum.length?(this.propErro.name="Please input  reference number",this.propErro.show=!0):(this.propErro.name="",this.propErro.show=!1),1==this.choosedOpenButtun){if(this.tradinErro.name="",this.tradinErro.show=!1,0==this.chooseTime.length?(this.timeErro.name="Please select a dateRange",this.timeErro.show=!0):(this.timeErro.name="",this.timeErro.show=!1),0==this.weekNum.length?(this.weekErro.name="Please input weekly turnover",this.weekErro.show=!0):(this.weekErro.name="",this.weekErro.show=!1),0==this.email.length||0==this.referNum.length||0==this.chooseTime.length||0==this.weekNum.length)return}else{if(0!=this.choosedOpenButtun)return this.tradinErro.name="Please choose currently tradin status",void(this.tradinErro.show=!0);if(this.tradinErro.name="",this.tradinErro.show=!1,0==this.openTime.length?(this.openTimeErro.name="Please select a date",this.openTimeErro.show=!0):(this.openTimeErro.name="",this.openTimeErro.show=!1),0==this.email.length||0==this.referNum.length||0==this.openTime.length)return}if(1==this.choosedOpenButtun){var e=this.weekNum.replace(/,/g,"");if(e=e.replace(/£/g,""),!this.checkNum(e))return void(this.weekErro.name="Please input correct weekly turnover");var t=this,n={email:this.email,shop_union_id:this.referNum,turnover:parseFloat(e),start_date:this.startTime,end_date:this.endTime};this.loading=!0,J(n).then(function(e){0==e.error_item.length&&(t.showSure=!0),"week_time"!==e.error_item&&"start_date"!==e.error_item&&"end_date"!==e.error_item||(t.timeErro.name="Please select correct dateRange"),"email"===e.error_item&&(t.emailErro.name="Please check your email address"),"shop_union_id"===e.error_item&&(t.propErro.name="Please check your URN"),"turnover"===e.error_item&&(t.weekErro.name="Please input correct weekly turnover"),t.loading=!1},function(e){t.loading=!1})}else if(0==this.choosedOpenButtun){var i=this,s={email:this.email,shop_union_id:this.referNum,start_trading_time:this.openTime+"T00:00:00+08:00",trading_status:-1};this.loading=!0,K(s).then(function(e){0==e.err_code?(i.showOpenNotice=!0,i.loading=!1):(i.loading=!1,i.$message.error(e.err_desc))},function(e){e.data.err_desc&&i.$message.error(e.data.err_desc),i.loading=!1})}},submit:function(){var e=this,t=this.weekNum.replace(/,/g,"");if(t=t.replace(/£/g,""),this.checkNum(t)){var n={email:this.email,shop_union_id:this.referNum,turnover:parseFloat(t),start_date:this.startTime,end_date:this.endTime};this.loading=!0,z(n).then(function(t){e.showSure=!1,e.showOkay=!0,e.loading=!1},function(t){t.data.err_desc&&e.$message.error(t.data.err_desc),e.loading=!1})}else this.weekErro.name="Please input correct weekly turnover"},goHome:function(){this.resetInfo(),this.showOkay=!1,this.showOpenNotice=!1},closeSure:function(){this.showSure=!1}}},Z=X,ee=(n("da99"),Object(r["a"])(Z,d,m,!1,null,"6d9727a6",null));ee.options.__file="Index.vue";var te=ee.exports;i["default"].use(l["a"]);var ne=new l["a"]({mode:"history",routes:[{path:"/",name:"index",component:te}]}),ie=(n("0fae"),n("b2d6")),se=n.n(ie);Q["Message"].install=function(e,t){e.prototype.$message=Q["Message"]},i["default"].use(V.a,{locale:se.a}),i["default"].component(Q["Button"].name,Q["Button"]),i["default"].use(Q["Message"]),i["default"].use(Q["DatePicker"]),i["default"].config.productionTip=!1,new i["default"]({router:ne,store:H,render:function(e){return e(u)}}).$mount("#app")},"64a9":function(e,t,n){},9941:function(e,t,n){},bb74:function(e,t,n){e.exports=n.p+"img/brand-logo.4dd9784b.png"},da99:function(e,t,n){"use strict";var i=n("9941"),s=n.n(i);s.a}});
//# sourceMappingURL=app.0eafb6a3.js.map